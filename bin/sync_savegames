#!/usr/bin/env python3
#pylint:disable=no-member

from getpass import getuser
from pathlib import Path
from steamsync import SteamSync


sync = SteamSync(Path("~/Nextcloud/Misc/Savegames").expanduser())

# Find home
steamns_home = Path("~/.local/steam/home/%s/" % getuser()).expanduser()
if steamns_home.exists():
    sync.home_path = steamns_home


### -----------------------------------------------------------------
#  Steam Games
### -----------------------------------------------------------------
@sync.by_name("zanzarah")
def zanzarah(op):
    with op.game_directory.prefix("Save") as set:
        set += "*.dat"
        if set.show_confirm():
            set.execute()

#@sync.by_id(787860)
def fs19(op):
    with op.my_documents.prefix("My Games/FarmingSimulator2019") as set:
        set.add(
            "music/streamingInternetRadios.xml",
            "savegame[1-9]",
            "savegame[1-2][0-9]"
            "VERSION",
        )
        set.execute()

#@sync.by_name("Fell Seal")
def fell_seal(op):
    with op.home.prefix("Fell Seal") as set:
        set += "saves"
        set += "customdata"
        set.execute()


### -----------------------------------------------------------------
#  Other Games
### -----------------------------------------------------------------
@sync.generic("Final Fantasy XIV", platform="win")
def ffxiv(op):
    path = op.my_documents.prefix("My Games/FINAL FANTASY XIV - A Realm Reborn")
    if not path.exists():
        return
    with path as set:
        set += "FFXIV_CHR*/*.dat"
        if set.show_confirm():
            set.execute()

